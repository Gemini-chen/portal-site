import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Portal-Core|DataProvider"  parameters={{ order: 3}}/>

为了抹平不同api间的差异，使用一个对象来集成所有的请求,并且将Http的响应转换为 `portal-elements` 需要的数据格式

```javascript
 dataProvider.queryOne('id').then(res=>{
     console.log(res)
 })
```

在`portal-data-cms`中提供了常用的dataProvider,使用方式如下：

```jsx
import { PortalContext, RouteContext } from 'portal-core';
import cms, { createHttpClient } from '../packages/portal-data-cms/src';
const http = createHttpClient(
    api,
    appid,
    appkey
);
function App() {
    return (
        <PortalContext models={[routesMap]} dataProvider={cms(http)}>
            <RouteContext history={createBrowserHistory()} root={'cn'}>
               // ...
            </RouteContext>
        </PortalContext>
    );
}
```


dataProvider必须有如下实现:

```javascript
 const dataProvider = {
     method:(params)=>Promise
 }

```

### 扩展dataProvider
因为 dataProvider 就是个普通的对象，可以很简单的扩展

```javascript
 
 const myDataProvider = {
     ...dataProvider,
     update:()=>{
         return new Promise((resolve,reject)=>{
             // ...
             resolve();
         })
     }
 }
 
```