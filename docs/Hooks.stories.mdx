import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Portal-Core|Hooks"  />

`portal-elements` 全部由 `React Hooks` 实现。同时，也可以 `portal-core`中提供的hooks 实现自己的组件

- #### useDataProvider(method?:string)

`portal-site` 将dataProvider 存在 React Context 中，所以可以在任何组件内部获取到，只需要使用 `useDataProvider` hook

```jsx
  const NewsDetail = ({id})=>{
     const dataProvider =  useDataProvider('getNewsDetail');
     useEffect(() => {
         dataProvider(id).then(()=>{
             // ...
         })
       
     }, [id]);
     return <div>
           // ...
     </div>
  }
```

- #### useRoutesMap()

`portal-site`将所有的路由信息处理为一张路由表


`useRoutesMap`返回的是根路由对象
```javascript
 interface IRootRouteMap {
  isRoot: Boolean;
  parent: null;
  children: Array<IRoute>;
  flat: () => Array<IRoute>; // 将所有的子路由展开
  findByPath: (path: string) => IRoute | undefined // 根据path找到单条路由
}

```
每条路由信息如下
``` javascript
interface IRoute {
  parent: IRoute; // 父级路由，根路由为 null
  children: Array<IRoute>; // 子路由
  name: string; 
  route: string; // 路由名
  description?: string; 
  url?: string;
  id: string;
  path: string; // 完整的路由地址
  isHome: boolean // 是否为首页路由
}
```

- #### useQueryList(resource: string,page: number,size: number,onSuccess?: (any) => any,onFailure?: (any) => any)

`useQueryList`提供可查询列表数据的能力

```jsx
function List() {
    const {records,loading} = useQueryList('news',1,10);
    return records.map(i=><li>{i}</li>)
}

```

`useQueryList`不提供具体的分页功能，如果要实现分页功能，可以参考 `<List>`组件的实现

- #### useQueryOne(resource: string,path: string)

`useQueryOne`提供查询单条数据详情的能力

